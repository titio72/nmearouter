<!DOCTYPE html>
<html>
<head>
    <meta charset="ISO-8859-1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Andrea Boni NMEARouter</title>
    <link rel="icon" type="image/png" href="nmeasail.png">
    <script src="js/nmearouter.js?l"></script>
    <style>
    
    .panelTable {
    width: 100%;
    font-family: monospace; 
    font-size: 17pt;
    }
    
    .panelText {
    font-family: monospace; 
    font-size: 18pt;
    }
    
    .panelTextSmall {
    font-family: monospace; 
    font-size: 12pt;
    }
    
    .panelRouter {
       height: 300px;
    }
    </style>
</head>
<script type="text/javascript">

    app.controller("myCtrl", function($scope) {
        $scope.V0 = { value: 0.0 };
        $scope.V1 = { value: 0.0 };
    });
  
    var heading = 0.0;
    var speed = 0.0;
 
    var socket = null;
    $(document).ready(function() {
        window.setInterval(checkConnection, 1000);
    });

    function checkConnection() {
        if (!socket) {
            resetConnection();
        } else if (socket.readyState>=2) {
            resetConnection();
        } 
    }
    
    function resetConnection() {
        if (socket && socket.readyState<2 /*OPEN or OPENING*/) {
            socket.close();
        }
        socket = new WebSocket("ws://" + window.location.hostname + ":1112/events");
        socket.onmessage = function (event) {
            processEvent(event);
        }
        socket.onclose = function (event) {
            socketClosed(event);
        }
    }
    
    function socketClosed( event ) {
    } 
    
    function processEvent( event ) {
        var msg = JSON.parse(event.data);
        if (msg.topic=='XDR') {
            for (var prop in msg) {
                if (prop!='XDR') {
                    var controllerElement = document.getElementById('sensorPanel');
                    var controllerScope = angular.element(controllerElement).scope();
                    controllerScope[prop] = msg[prop];
                    controllerScope.$evalAsync();
                }
            }
    } else if (msg.topic=="XMC") {
            var controllerElement = document.getElementById('sensorPanel');
            var controllerScope = angular.element(controllerElement).scope();
        if (msg.anchor) {
            msg.anchor_lat = msg.avg_lat;
            msg.anchor_lon = msg.avg_lon;
        } else {
            msg.anchor_lat = "";
            msg.anchor_lon = "";
        }
            controllerScope['xmc'] = msg;
            controllerScope.$evalAsync();
        } else if (msg.topic=='RMC') {
            var controllerElement = document.getElementById('sensorPanel');
            var controllerScope = angular.element(controllerElement).scope();
            msg.s_dir = direction(msg.COG);
            msg.s_time = new Date(Date.parse(msg.UTC)).toLocaleTimeString();
            controllerScope['rmc'] = msg;
            controllerScope.$evalAsync();
        } else if (msg.topic=='DBT') {
            var controllerElement = document.getElementById('sensorPanel');
            var controllerScope = angular.element(controllerElement).scope();
            controllerScope['depth'] = msg;
            controllerScope.$evalAsync();
        } else if (msg.topic=='VHW') {
            var controllerElement = document.getElementById('sensorPanel');
            var controllerScope = angular.element(controllerElement).scope();
            msg.s_dir = direction(msg.mag_angle);
            speed = msg.speed;
            controllerScope['vector'] = msg;
            controllerScope.$evalAsync();
        } else if (msg.topic=='MWV_R') {
            var controllerElement = document.getElementById('sensorPanel');
            var controllerScope = angular.element(controllerElement).scope();
            controllerScope['wind_r'] = msg;
            if (msg.angle>180) {
                msg.angle = 360 - msg.angle;
                msg.tack = "Port"
            } else {
                msg.tack = "Starboard"
            }
            rr = trueWind(speed, msg.angle, msg.speed);
            controllerScope['wind_t'] = rr;
            controllerScope['wind'] = {
                mag_angle: heading - rr.angle,
                speed: rr.speed 
            };
            controllerScope.$evalAsync();
        } else if (msg.topic=='HDG') {
            var controllerElement = document.getElementById('sensorPanel');
            var controllerScope = angular.element(controllerElement).scope();
            msg.s_dir = direction(msg.angle);
            heading = msg.angle;
            controllerScope['hdg'] = msg;
            controllerScope.$evalAsync();
        }

    }


    function trueWind(speed, appWindDeg, appWindSpeed) {
        v = speed;
        w = appWindSpeed;
        wA =  appWindDeg / 180.0 * Math.PI;
        
        wAx = w * Math.sin(wA);
        wAy = w * Math.cos(wA);
        
        wTx = wAx;
        wTy = wAy - v;
        
        var r = {
        angle: 180.0 * ((Math.PI / 2) - Math.atan2(wTy, wTx)) / Math.PI,
        speed: Math.sqrt(wTx*wTx + wTy*wTy)
    }
    return r;    
    }


</script>


<body ng-app="nmearouter">
    <div id="sensorPanel" class="container-fluid" ng-controller="myCtrl">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">Home</a></li>
          <li class="breadcrumb-item active">Sensors</li>
        </ol>      
        
        <div class="row">
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h2 class="panel-title">Diag</h2>
                    </div>
                    <div class="panel-body panelRouter">
                        <table class="panelTable">
                            <tr><td>Battery Svc</td><td style="text-align: right">{{V0.value | number:1}} V</td></tr>
                            <tr><td>Battery Eng</td><td style="text-align: right">{{V1.value | number:1}} V</td></tr>
                            <tr><td>&nbsp;</td><td style="text-align: right">&nbsp;</td></tr>
                            <tr><td>CPU</td><td style="text-align: right">{{CPUTemp.value | number:1}} °C</td></tr>
                            <tr><td>Equipment</td><td style="text-align: right">{{AirTemp_1.value | number:1}}°C</td></tr>
                            <tr><td>Engine</td><td style="text-align: right">{{EngineTemp.value | number:1}} °C</td></tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h2 class="panel-title">Meteo</h2>
                    </div>
                    <div class="panel-body panelRouter">
                        <table class="panelTable">
                            <tr><td>Cab Temp</td><td style="text-align: right">{{AirTemp_0.value | number:1}}°C</td></tr>
                            <tr><td>Ext Temp</td><td style="text-align: right">{{ExtAirTemp.value | number:1}}°C</td></tr>
                            <tr><td>&nbsp;</td><td style="text-align: right">&nbsp;</td></tr>
                            <tr><td>Press.</td><td style="text-align: right">{{Barometer_1.value | number:3}} MB</td></tr>
                            <tr><td>Humidity</td><td style="text-align: right">{{Humidity_1.value | number:1}}%</td></tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h2 class="panel-title">Gyro</h2>
                    </div>
                    <div class="panel-body panelRouter">
                           <table class="panelTable">
                            <tr><td>Head</td><td style="text-align: right">{{HEAD.value | number:1}}°</td></tr>
                            <tr><td>&nbsp;</td><td style="text-align: right">&nbsp;</td></tr>
                            <tr><td>&nbsp;</td><td style="text-align: right">&nbsp;</td></tr>
                            <tr><td>Roll</td><td style="text-align: right">{{ROLL.value | number:1}}°</td></tr>
                            <tr><td>Pitch</td><td style="text-align: right">{{PITCH.value | number:1}}°</td></tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h2 class="panel-title">GPS</h2>
                    </div>
                    <div class="panel-body panelRouter">
                        <table class="panelTable">
                            <tr><td>Position</td><td style="text-align: right">{{rmc.latitude}}</td></tr>
                            <tr><td>&nbsp;</td><td style="text-align: right">{{rmc.longitude}}</td></tr>
                			<tr><td>Anchor</td><td style="text-align: right">{{xmc.anchor_lat}}</td></tr>
                			<tr><td>&nbsp;</td><td style="text-align: right">{{xmc.anchor_lon}}</td></tr>
                            <tr><td>SOG</td><td style="text-align: right">{{rmc.SOG | number:1}} Kn</td></tr>
                            <tr><td>COG</td><td style="text-align: right">{{rmc.s_dir}} {{rmc.COG | number:1}}°</td></tr>
                                <tr><td colspan="2" style="text-align: right">{{rmc.s_time}}</td></tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h2 class="panel-title">Navi</h2>
                    </div>
                    <div class="panel-body panelRouter">
                        <table class="panelTable">
                            <tr><td>Speed</td><td style="text-align: right">{{vector.speed | number:1}} Kn</td></tr>
                            <tr><td>Head</td><td style="text-align: right">{{vector.s_dir}} {{vector.true_angle | number:1}}°</td></tr>
                            <tr><td>&nbsp;</td><td style="text-align: right">&nbsp;</td></tr>
                            <tr><td>Depth</td><td style="text-align: right">{{depth.depth | number:1}} m</td></tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h2 class="panel-title">Heading</h2>
                    </div>
                    <div class="panel-body panelRouter">
                        <table width="100%">
                            <tr>
                                <td>
                                    <div class="panelTextSmall">{{hdg.angle|numberFixedLen:3:0}}° {{hdg.s_dir}}</div>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <svg width="210" height="210" style="display: block; margin: auto;">
                                        <circle cx="50%" cy="50%" r="90" stroke="gray" stroke-width="3" fill="#EEEEFF"></circle>

                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(45 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(45 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(135 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(135 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(225 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(225 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(315 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(315 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(0 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(0 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(90 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(90 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(180 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(180 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(270 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(270 105 105)"></path>

                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(0 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(15 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(30 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(45 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(60 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(75 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(90 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(105 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(120 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(135 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(150 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(165 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(180 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(195 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(210 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(225 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(240 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(255 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(270 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(285 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(300 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(315 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(330 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(345 105 105)"></path>
                                        <path d="M95 105 L105 45 L115 105 Z" fill="blue" stroke="gray" stroke-width="3" transform="rotate({{hdg.angle}} 105 105)"></path>
                                    </svg>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h2 class="panel-title">Abs. Wind</h2>
                    </div>
                    <div class="panel-body panelRouter">
                        <table width="100%">
                            <tr>
                                <td>
                                    <div class="panelTextall">{{wind.speed | number:1}}Kn {{wind.mag_angle | numberFixedLen:3:0}}° {{wind.s_dir}}</div>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <svg width="210" height="210" style="display: block; margin: auto;">
                                        <circle cx="50%" cy="50%" r="90" stroke="gray" stroke-width="3" fill="#EEEEFF"></circle>

                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(45 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(45 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(135 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(135 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(225 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(225 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(315 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(315 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(0 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(0 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(90 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(90 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(180 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(180 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(270 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(270 105 105)"></path>

                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(0 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(15 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(30 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(45 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(60 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(75 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(90 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(105 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(120 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(135 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(150 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(165 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(180 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(195 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(210 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(225 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(240 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(255 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(270 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(285 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(300 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(315 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(330 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(345 105 105)"></path>
                                        <path d="M95 105 L105 45 L115 105 Z" fill="blue" stroke="gray" stroke-width="3" transform="rotate({{wind.mag_angle}} 105 105)"></path>
                                    </svg>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h2 class="panel-title">Rel. Wind</h2>
                    </div>
                    <div class="panel-body panelRouter">
                        <table width="100%">
                            <tr>
                                <td>
                                    <div class="panelTextSmall">A {{wind_r.speed | number:1}}Kn {{wind_r.angle | numberFixedLen:3:0}}° {{wind_r.tack}}<br>
                                    T {{wind_t.speed | number:1}}Kn {{wind_t.angle|numberFixedLen:3:0}}°<br>
                                     </div>
                                </td>
                            </tr>
                            <tr>
                                <td align="center">
                                    <svg width="210" height="210" style="display: block; margin: auto;">
                                        <circle cx="50%" cy="50%" r="90" stroke="gray" stroke-width="3" fill="#EEEEFF"></circle>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(45 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(45 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(135 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(135 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(225 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(225 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#A0A0A0" transform="rotate(315 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#A0C0C0" transform="rotate(315 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(0 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(0 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(90 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(90 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(180 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(180 105 105)"></path>
                                        <path d="M95 95 L105 20 L105 105 Z"  fill="#C0A0A0" transform="rotate(270 105 105)"></path>
                                        <path d="M105 105 L105 20 L115 95 Z" fill="#C0C0C0" transform="rotate(270 105 105)"></path>
                                        <path d="M35 105 A70 70 00 0 1 105 35" stroke="red" fill="none" stroke-width="5"></path>
                                        <path d="M35 105 A70 70 00 0 1 105 35" stroke="green" fill="none" stroke-width="5" transform="rotate(90 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(0 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(15 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(30 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(45 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(60 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(75 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(90 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(105 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(120 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(135 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(150 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(165 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(180 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(195 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(210 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(225 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(240 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(255 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(270 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(285 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(300 105 105)"></path>
                                        <path d="M25 105 L45 105" fill="none" stroke="black" stroke-width="3" transform="rotate(315 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(330 105 105)"></path>
                                        <path d="M30 105 L40 105" fill="none" stroke="black" stroke-width="1" transform="rotate(345 105 105)"></path>
                                        <path d="M95 105 L105 45 L115 105 Z" fill="lightblue" stroke="gray" stroke-width="3" transform="rotate({{wind_t.angle}} 105 105)"></path>
                                        <path d="M95 105 L105 45 L115 105 Z" fill="blue" stroke="gray" stroke-width="3" transform="rotate({{wind_r.angle}} 105 105)"></path>
                                    </svg>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
