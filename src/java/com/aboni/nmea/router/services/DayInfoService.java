package com.aboni.nmea.router.services;import com.aboni.nmea.router.track.impl.DBTrackAnalyticsByDate;import com.aboni.utils.ServerLog;import org.json.JSONObject;import java.time.Instant;import java.util.Calendar;public class DayInfoService extends JSONWebService {    private static final String DATE_FORMAT = "yyyyMMdd";    public DayInfoService() {        super();        setLoader(this::getResult);    }    private JSONObject getResult(ServiceConfig config) throws JSONGenerationException {        try {            Calendar c = Calendar.getInstance();            c.setTimeInMillis(c.getTimeInMillis() - (c.getTimeInMillis() % (24 * 60 * 60 * 1000)));            Calendar cFrom = config.getParamAsCalendar("from", c, DATE_FORMAT);            c.setTimeInMillis(c.getTimeInMillis() + 86400000L);            Calendar cTo = config.getParamAsCalendar("to", c, DATE_FORMAT);            DBTrackAnalyticsByDate an = new DBTrackAnalyticsByDate();            return an.getAnalysis(Instant.ofEpochMilli(cFrom.getTimeInMillis()), Instant.ofEpochMilli(cTo.getTimeInMillis()));        } catch (Exception e) {            ServerLog.getLogger().error("Error reading daily stats", e);            throw new JSONGenerationException("Error reading daily stats", e);        }    }}